<div class="hidden" id="register" role="tabpanel" aria-labelledby="register-tab">
    <h2 class="text-3xl font-bold text-center text-gray-800 dark:text-white mb-8">Crie sua Conta!</h2>
    <form method="post" class="space-y-6" id="register-form">
        <small class="flex w-full justify-center text-center" id="warning"></small>
        <div>
            <label for="username"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Usuário:</label>
            <input type="text" id="username" name="username" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Escolha um nome de usuário">
        </div>
        <div>
            <label for="name"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Nome:</label>
            <input type="text" id="name" name="name" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Digite seu nome">
        </div>
        <div>
            <label for="email"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">E-mail:</label>
            <input type="email" id="email" name="email" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Seu melhor e-mail">
        </div>
        <div>
            <label for="password"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Senha:</label>
            <input type="password" id="password" name="password" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Crie uma senha forte">
        </div>
        <div>
            <label for="confirm-password"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirmar Senha:</label>
            <input type="password" id="confirm-password" name="confirm_password" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Confirme sua senha">
        </div>
        <button type="submit" id="register-button"
            class="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary/70 cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition duration-300 ease-in-out">
            Cadastrar
        </button>
    </form>
</div>

<script>
  document.getElementById('register-form').addEventListener('submit', async function (e) {
    e.preventDefault();
    const formData = new FormData(this);
    const response = await fetch('api/register', {
      method: 'POST',
      body: formData,
    });

    const result = await response.json();
    if (response.ok) {
      document.getElementById('warning').textContent = 'Cadastro realizado com sucesso!';
      document.getElementById('warning').classList.remove('text-red-500');
      document.getElementById('warning').classList.add('text-green-500');
      setTimeout(() => {
        window.location.href = '/';
      }, 1000);
    } else {
      document.getElementById('warning').textContent = result.message || 'Erro ao cadastrar. Tente novamente.';
      document.getElementById('warning').classList.remove('text-green-500');    
      document.getElementById('warning').classList.add('text-red-500');
    }
  });
</script>