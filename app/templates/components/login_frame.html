<div class="hidden" id="login" role="tabpanel" aria-labelledby="login-tab">
    <h2 class="text-3xl font-bold text-center text-gray-800 dark:text-white mb-8">Bem-vindo(a) de Volta!</h2>
    <form method="post" class="space-y-6" id="login-form">
        <small class="flex w-full justify-center text-center" id="warning"></small>
        <div>
            <label for="login-username"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Usuário:</label>
            <input type="text" id="login-username" name="username" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Seu nome de usuário">
        </div>
        <div>
            <label for="login-password"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Senha:</label>
            <input type="password" id="login-password" name="password" required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                placeholder="Sua senha secreta">
        </div>
        <button type="submit" id="login-button"
            class="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary/70 cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition duration-300 ease-in-out">
            Entrar
        </button>
    </form>
</div>

<script>
    document.getElementById('login-form').addEventListener('submit', async function (e) {
        e.preventDefault();
        const formData = new FormData(this);
        const response = await fetch('/login', {
            method: 'POST',
            body: formData,
        });
        
        const result = await response.json();
        if (response.ok) {
            document.getElementById('warning').textContent = 'Login realizado com sucesso!';
            document.getElementById('warning').classList.remove('text-red-500');
            document.getElementById('warning').classList.add('text-green-500');
            setTimeout(() => {
                window.location.href = '/'; // Redireciona para a página inicial
            }, 1000);
        } else {
            document.getElementById('warning').textContent = result.message || 'Erro ao fazer login. Tente novamente.';
            document.getElementById('warning').classList.remove('text-green-500');
            document.getElementById('warning').classList.add('text-red-500');
        }
    });
</script>